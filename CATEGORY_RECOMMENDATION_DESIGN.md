# 智能分类推荐系统设计文档

## 问题分析

### 当前系统的问题
1. **简单关键词匹配**: 只是查找关键词是否存在，没有考虑语义
2. **权重不合理**: 所有关键词权重相同，没有区分重要性
3. **忽视LLM分析**: 没有充分利用LLM提供的结构化分析结果
4. **缺乏上下文**: 没有考虑关键词出现的位置和频率
5. **固定推荐数量**: 总是推荐3个分类，不够灵活

## 改进方案

### 1. 多维度评分系统

#### A. 标题匹配分数 (权重: 40%)
- 精确匹配: +10分
- 部分匹配: +5分
- 相似度匹配: +3分

#### B. 摘要/描述匹配分数 (权重: 30%)
- 关键词出现频率: 每次+2分
- 关键词位置权重: 开头+3分，中间+1分

#### C. LLM分析结果 (权重: 20%)
- topic字段: +5分
- keywords字段: 每个匹配+3分
- methods字段: 每个匹配+2分
- summary字段: 每个匹配+1分

#### D. 内容相关性 (权重: 10%)
- 内容类型匹配: +5分
- 来源平台匹配: +3分

### 2. 智能关键词库

#### 分类定义
```
1. 语法 (Grammar)
   - 核心关键词: 语法, grammar, tense, verb, 动词, 时态, 句式, 结构
   - 相关关键词: 句子, sentence, clause, 从句, 主语, predicate
   - 高权重关键词: 语法规则, 语法讲解, 语法分析

2. 词汇 (Vocabulary)
   - 核心关键词: 词汇, vocabulary, word, 单词, 短语, phrase
   - 相关关键词: 词义, meaning, 同义词, synonym, 反义词
   - 高权重关键词: 词汇学习, 词汇扩展, 词汇记忆

3. 听力 (Listening)
   - 核心关键词: 听力, listening, audio, 音频, 听, 发音
   - 相关关键词: 音频, sound, 口音, accent, 语速
   - 高权重关键词: 听力训练, 听力理解, 听力技巧

4. 阅读 (Reading)
   - 核心关键词: 阅读, reading, read, 文章, article
   - 相关关键词: 文本, text, 段落, paragraph, 理解
   - 高权重关键词: 阅读理解, 阅读技巧, 阅读速度

5. 写作 (Writing)
   - 核心关键词: 写作, writing, write, 作文, essay
   - 相关关键词: 段落, paragraph, 结构, structure, 表达
   - 高权重关键词: 写作技巧, 写作训练, 写作指南

6. 口语 (Speaking)
   - 核心关键词: 口语, speaking, speak, 说, 对话, conversation
   - 相关关键词: 发音, pronunciation, 流利, fluency, 表达
   - 高权重关键词: 口语训练, 口语表达, 口语技巧

7. 教学 (Teaching)
   - 核心关键词: 教学, teaching, teach, 教学, 方法, method, 课堂
   - 相关关键词: 课程, course, 教师, teacher, 学习方法
   - 高权重关键词: 教学方法, 教学策略, 课堂管理

8. 教材 (Textbook)
   - 核心关键词: 教材, textbook, 教科书, 教学资源
   - 相关关键词: 教科书, 教学资源, 学习资料, 课本
   - 高权重关键词: 教材选择, 教材推荐, 教材对比

9. 用法 (Usage)
   - 核心关键词: 用法, usage, 用法, 使用, 应用
   - 相关关键词: 应用, application, 实践, practice, 场景
   - 高权重关键词: 实际应用, 使用场景, 用法对比

10. 人群 (Audience)
    - 核心关键词: 人群, audience, 学生, 初学者, beginner, 高级
    - 相关关键词: 水平, level, 年龄, age, 儿童, 成人
    - 高权重关键词: 初学者指南, 高级技巧, 儿童英语

11. 考试 (Exam)
    - 核心关键词: 考试, exam, test, FCE, IELTS, TOEFL
    - 相关关键词: 准备, preparation, 技巧, tip, 策略
    - 高权重关键词: 考试准备, 考试技巧, 真题讲解
```

### 3. 动态推荐数量

- 如果得分最高的分类得分 > 15: 推荐1个
- 如果得分最高的分类得分 > 10: 推荐2-3个
- 如果得分最高的分类得分 > 5: 推荐3-5个
- 如果得分最高的分类得分 <= 5: 推荐所有得分 > 0 的分类

### 4. 置信度评分

- 返回每个推荐分类的置信度 (0-100%)
- 用户可以根据置信度决定是否采纳推荐

## 实现步骤

1. 创建 `CategoryRecommender` 类
2. 实现多维度评分算法
3. 添加智能关键词库管理
4. 实现置信度计算
5. 集成到现有系统
6. 添加测试用例

## 预期效果

- 推荐准确率提升 50%+
- 推荐多样性提升
- 用户满意度提升
